<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>portfoliovitrine</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Encode+Sans+SC:wdth,wght@100..200,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/utilities.css" />
  </head>
  <body class=" body flex relative ">
<div id="app" class=" flex  h-screen w-screen overflow-y-auto" ></div>
    <!-- <div id="app2" class=" h-full w-full" ></div> -->
    <!-- <script type="module" src="/src/main.js"></script> -->
    <script type="module" >
      import { ContactPage} from "/src/template/Contact/page.js";
      import { ProjectPage} from "/src/template/Project/page.js";
      import { AboutMePage} from "/src/template/About Me/page.js";
      import { ConstructionPage} from "/src/template/EnCoursConstruction/page.js";
      import { BurgerMenu } from "/src/template/BurgerMenu/script.js";
      import { Router } from "/src/utils/router.js";
      let C = {};
      // let V ={};
      // V.renderAbout = function(){
      //   let slot = document.getElementById("app");
      //   slot.appendChild(AboutMeView.dom());
      // };
      // V.renderProject = function(){
      //   let slot = document.getElementById("app");
      //   slot.appendChild(ProjectView.dom());
      // };
      // // V.renderContact = function(){
      // //   let slot = document.getElementById("app");
      // //   slot.appendChild(ContactView.dom()) ;
      // // };
      // V.renderEnCoursConstruction = function(){
      //   let slot = document.getElementById("app");
      //   slot.appendChild(ConstructionView.dom()) ;
      // };



      // C.handlerLinks = function(ev){
      //   if (ev.target.tagName !== 'A') return;
      //   ev.preventDefault();
      //   const href = ev.target.getAttribute('href');
      //   if(href === '#about'){
      //     document.getElementById("app").innerHTML = "";
      //     V.renderAbout();
      //   }else if(href === '#projects'){
      //     document.getElementById("app").innerHTML = "";
      //    V.renderEnCoursConstruction();
      //   }else if(href === '#contacts'){
      //     document.getElementById("app").innerHTML = "";
      //     V.renderContact();
      //   }
      // };

      C.init = function(){
        // Pas besoin de DOMContentLoaded, on est déjà chargé
        // Attendre que la première page soit rendue
        let retries = 0;
        const setupBurger = () => {
          const menuToggle = document.getElementById('menu-toggle');
          if (menuToggle && retries < 50) {
            BurgerMenu.setupMenuHandlers();
          } else if (retries < 50) {
            retries++;
            setTimeout(setupBurger, 100);
          }
        };
        setTimeout(setupBurger, 500);
      };

      const router = new Router('app');

      // Fonction pour construire les chemins
      const makePath = (name) => name === '' ? '/' : '/' + name;
      
      router.addRoute(makePath(''), () => AboutMePage());
      router.addRoute(makePath('about'), () => AboutMePage());
      router.addRoute(makePath('projects'), () => ConstructionPage());
      router.addRoute(makePath('contacts'), () => ContactPage());

      // Exposer le router globalement
      window.router = router;

      // Démarrer le routeur
      router.start();

      // Puis initialiser le reste (burger, etc.)
      C.init();
    </script>
  </body>
</html>
